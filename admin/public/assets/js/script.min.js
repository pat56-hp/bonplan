// @ts-nocheck
let suggestion=[],loading=!1;const address_val=document.querySelector("#adresse_input"),latitude_val=document.getElementById("latitude_input"),longitude_val=document.getElementById("longitude_input"),geoloc_adress_content=document.getElementById("geoloc_adress"),handleInputChange=async e=>{const t=e.target.value.trim();loading=!0,geoloc_adress_content.style.display="block",geoloc_adress_content.innerHTML="";const n=document.createElement("li");if(n.className="list-group-item",n.textContent="En cours de chargement...",geoloc_adress_content.appendChild(n),console.log("ok"),t.length>2)try{const e=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(t)}&format=json&addressdetails=1&limit=10`);if(!e.ok)throw new Error("Erreur lors de la requête");const n=await e.json();suggestion=n,updateSuggestions()}catch(e){console.error("Erreur de récupération des données :",e),suggestion=[],updateSuggestions()}else suggestion=[],geoloc_adress_content.style.display="none";loading=!1},updateSuggestions=()=>{geoloc_adress_content.innerHTML="",suggestion.forEach((e=>{const t=document.createElement("li");t.className="list-group-item",t.textContent=e.display_name,t.onclick=()=>handleSelectValue(e),geoloc_adress_content.appendChild(t)})),0===suggestion.length&&(geoloc_adress_content.style.display="none")},handleSelectValue=e=>{console.log(e),address_val.value=e.display_name,latitude_val.value=e.lat,longitude_val.value=e.lon,geoloc_adress_content.style.display="none"};address_val.addEventListener("keyup",handleInputChange),address_val.addEventListener("blur",(()=>{setTimeout((()=>{geoloc_adress_content.style.display="none"}),200)}));